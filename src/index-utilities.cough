{ createMalIndex } = require './type-utilities'
{ jsString? }      = require './js-utilities'

fromJsObjects = (jsObjects...) ->
  copy = {}
  for jsObject in jsObjects
    for own key, val of jsObject
      if jsString? key
        #copy['"' + key + '"'] = val
        copy[':' + key] = val
      else
        copy[key] = val
  createMalIndex copy

fromMalIndex = \malIndex ->
  result = {}
  for own key, value of malIndex.jsValue
    if jsString? key
      newKey = switch key[0]
        when ':' then key[1 ..]
        when '"' then key[1 .. -2]
        else          key
      result[newKey] = value
    else
      result[key] = value
  result

module.exports = {
  fromJsObjects
  fromMalIndex
}
