// `prompt` must be defined by jq_console.

var max_history_length = 1000;

// Never used directly, so perhaps overrides a definition by jq_console.
function jq_load_history(jq) {
    if (localStorage['mal_history']) {
        var lines = JSON.parse(localStorage['mal_history']);
        if (lines.length > max_history_length) {
            lines = lines.slice(lines.length-max_history_length);
        }
        jq.SetHistory(lines);
    }
}

// Never used directly, so perhaps overrides a definition by jq_console.
function jq_save_history(jq) {
    var lines = jq.GetHistory();
    localStorage['mal_history'] = JSON.stringify(lines);
}


function readline(prompt_str) {
  return prompt(prompt_str);
};

module.exports = { readline : readline };
